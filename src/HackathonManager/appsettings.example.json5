// Documents all of the settings available for the Hackathon Manager application.
{
  // Name used for OpenTelemetry logs and traces.
  "ServiceName": "service-name",

  "ConnectionStrings": {
    "HackathonDb": "See Npgsql documentation for PostgreSQL connection string format."
  },

  // When true, serve the SPA using this app's Kestrel server.  SPA files must be in the ./wwwroot directory.
  "EnableIntegratedSpa": false,

  // When true, apply migrations to the database after the app completes startup.
  "EnableStartupMigration": false,

  // Logging output settings.
  "Log": {
    // Enables text logging using the format specified in ConsoleOutputTemplate.
    "EnableConsoleTextLogging": false,
    "ConsoleOutputTemplate": "See Serilog documentation for template format.",

    // Enables structured logging of json objects to the console.
    "EnableConsoleJsonLogging": false,

    // Minimum log level for console text and json logging.  Default: Verbose.
    "ConsoleLogLevel": "Verbose|Debug|Information|Warning|Error|Fatal",

    // Enables logging to rotating files in ./logs.
    "EnableFileLogging": false,
    // Minimum log level for file logging.  Default: Verbose.
    "FileLogLevel": "Verbose|Debug|Information|Warning|Error|Fatal",

    // Enables logging to an OpenTelemetry collector.
    "EnableOpenTelemetryLogging": false,
    // Minimum log level for OpenTelemetry logging.  Default: Verbose.
    "OpenTelemetryLogLevel": "Verbose|Debug|Information|Warning|Error|Fatal",
    // OTLP endpoint URL including protocol and port.
    "OtlpEndpoint": "http://server:80/path/to/collector",
    "OtlpProtocol": "HttpProtobuf|Grpc",
    // Optional dictionary of headers to send with OTLP log requests.
    "OtlpHeaders": {
      "X-Api-Key": "super-secret-api-key"
    }
  },

  "Serilog": {
    // Minimum log level for the entire app.  Can be overriden for specific sinks.
    "MinimumLevel": {
      "Default": "Verbose|Debug|Information|Warning|Error|Fatal",

      // Override the minimum log level for specific namespaces or classes.
      "Override": {
        "Microsoft.Hosting.Lifetime": "Debug",
        "System": "Error"
      }
    },
  },

  // Settings for the RequestLogging middleware.
  "RequestLogging":  {
    // When true, logs the request body at the Trace (Verbose) level.
    // Should not be used in production as it can log sensitive information.
    // Can have a significant performance impact because it requires reading the request body twice.
    "LogBody": "false",
    // Level at which to log request bodies.  Default: Verbose.
    "BodyLogLevel": "Verbose|Debug|Information|Warning|Error|Fatal",
    // The maximum body size to log, in bytes.  Default: 4096.
    "MaxBodySize": 1234,
    // Optional list of content types used to filter requests that should be logged.  Can include wildcards.
    // Default: [] (nothing will be logged).
    "ContentTypes": ["application/json", "text/*"]
  },

  // OpenTelemetry tracing settings.
  "Trace": {
    "Enabled": false,
    // OTLP trace endpoint URL including protocol and port.
    "OtlpEndpoint": "http://server:80/path/to/collector",
    "OtlpProtocol": "HttpProtobuf|Grpc",
    // Optional dictionary of headers to send with OTLP trace requests.
    "OtlpHeaders": {
      "X-Api-Key": "super-secret-api-key"
    },
    // Enable OpenTelemetry to redact query string parameters in traces.
    "EnableUrlQueryRedaction": false
  }
}
